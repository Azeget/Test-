from duty.objects import dp, MySignalEvent
import vk_api

@dp.my_signal_event_register('Ğ¸Ğ½Ñ„Ğ¾Ğ¿Ğ°Ğº')
def get_sticker_pack_info(event: MySignalEvent) -> str:
    pack_name = event.payload.get('pack_name')

    try:
        sticker_pack = vk.stickers.getStickers(sticker_pack_name=pack_name)

        pack_id = sticker_pack['id']
        pack_title = sticker_pack['title']
        pack_author = sticker_pack['author']
        pack_stickers_count = len(sticker_pack['stickers'])
        pack_description = sticker_pack['description']
        pack_link = f"https://vk.com/stickers/{pack_name}"

        info_message = f"ğŸ“ƒĞ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑÑ‚Ğ¸ĞºĞµÑ€Ğ¿Ğ°ĞºĞµ:\nğŸ†” Ğ˜Ğ´ Ğ¿Ğ°ĞºĞ°: {pack_id}\nâœï¸ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ: {pack_title}\nğŸ‘¤ ĞĞ²Ñ‚Ğ¾Ñ€: {pack_author}\nğŸ”¢ ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑÑ‚Ğ¸ĞºĞµÑ€Ğ¾Ğ² Ğ² Ğ¿Ğ°ĞºĞµ: {pack_stickers_count}\nğŸ“„ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ: {pack_description}\nğŸ”— Ğ¡ÑÑ‹Ğ»ĞºĞ°: {pack_link}"

        return info_message
    except Exception as e:
        return f"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¾ ÑÑ‚Ğ¸ĞºĞµÑ€Ğ¿Ğ°ĞºĞµ: {e}"
